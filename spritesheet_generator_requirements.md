# スプライトシートジェネレーター 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
スプライトシートジェネレーター (Sprite Sheet Generator)

### 1.2 目的
ドット絵エディターで出力された二次元配列データを入力として受け取り、複数のスプライトを結合してPNG形式のスプライトシート画像を生成するツール

### 1.3 対象ユーザー
- ゲーム開発者
- ピクセルアートクリエイター
- Unity/Godot/Phaser等のゲームエンジン使用者

### 1.4 システム概要
ブラウザ上で動作する単一ページアプリケーション（SPA）として、テキスト形式の配列データを受け取り、グリッド配置されたスプライトシートをPNG画像として出力する。

---

## 2. 機能要件

### 2.1 入力機能

#### 2.1.1 データ入力仕様
| 項目 | 仕様 |
|------|------|
| 入力方法 | テキストエリアにペースト |
| 入力形式 | JavaScript二次元配列（12×12） |
| 複数スプライト | 1回の入力で1スプライト追加 |
| 入力上限 | 1回の入力: 10,000文字まで |

#### 2.1.2 対応入力形式
\`\`\`javascript
// 形式1: 改行あり（推奨）
[
  [0,1,1,0,0,0,0,0,0,0,0,0],
  [1,23,23,1,0,0,0,0,0,0,0,0],
  [1,23,23,1,0,0,0,0,0,0,0,0],
  [0,1,1,0,0,0,0,0,0,0,0,0],
  [0,0,0,0,28,28,0,0,0,0,0,0],
  [0,0,0,28,28,28,28,0,0,0,0,0],
  [0,0,0,28,28,28,28,0,0,0,0,0],
  [0,0,0,0,28,28,0,0,0,0,0,0],
  [0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,0,5,5,5,5,5,5,0,0,0],
  [0,0,0,0,5,5,5,5,0,0,0,0],
  [0,0,0,0,0,5,5,0,0,0,0,0]
]

// 形式2: 改行なし（コンパクト）
[[0,1,1,0,0,0,0,0,0,0,0,0],[1,23,23,1,0,0,0,0,0,0,0,0],[1,23,23,1,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,28,28,0,0,0,0,0,0],[0,0,0,28,28,28,28,0,0,0,0,0],[0,0,0,28,28,28,28,0,0,0,0,0],[0,0,0,0,28,28,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,5,5,5,5,5,5,0,0,0],[0,0,0,0,5,5,5,5,0,0,0,0],[0,0,0,0,0,5,5,0,0,0,0,0]]
\`\`\`

#### 2.1.3 入力UI仕様
| 項目 | 仕様 |
|------|------|
| テキストエリア | 幅100%、高さ120px以上 |
| フォント | 等幅フォント（monospace） |
| プレースホルダー | 「配列データをここにペースト」 |
| 追加ボタン | 「追加」ボタン、Enter非対応（誤入力防止） |
| クリアボタン | テキストエリアをクリア |

#### 2.1.4 バリデーション機能

##### 2.1.4.1 検証ルール
| 検証項目 | 合格条件 | エラーメッセージ |
|---------|---------|----------------|
| JSON形式 | 正しいJSON配列 | 「配列の形式が正しくありません」 |
| 外側配列長 | 12要素 | 「行数が12ではありません（現在: X行）」 |
| 内側配列長 | 各行12要素 | 「Y行目の列数が12ではありません（現在: X列）」 |
| 数値型 | 全要素が数値 | 「Y行X列が数値ではありません（値: Z）」 |
| 数値範囲 | 0-32の整数 | 「Y行X列の値が範囲外です（値: Z、範囲: 0-32）」 |
| 小数 | 整数のみ | 「Y行X列が整数ではありません（値: Z）」 |

##### 2.1.4.2 エラー表示仕様
| 項目 | 仕様 |
|------|------|
| 表示位置 | 入力エリア直下 |
| 表示色 | 赤（#dc3545） |
| アイコン | ❌ または ⚠️ |
| 自動消去 | 次の入力時にクリア |
| 複数エラー | 最初のエラーのみ表示 |

### 2.2 スプライト管理機能

#### 2.2.1 スプライト一覧表示
| 項目 | 仕様 |
|------|------|
| 表示形式 | サムネイルグリッド |
| サムネイルサイズ | 48×48px（4倍表示） |
| 背景 | チェッカーボード |
| インデックス表示 | 各スプライトに番号表示（#0, #1, ...） |
| 並び順 | 追加順（左→右、上→下） |

#### 2.2.2 スプライト追加
| 項目 | 仕様 |
|------|------|
| 追加方法 | 「追加」ボタンクリック |
| 追加位置 | 一覧の末尾 |
| 最大数 | 256個まで |
| 重複 | 許可（同じデータも追加可能） |
| 追加後 | 入力エリアをクリア |

#### 2.2.3 スプライト削除
| 項目 | 仕様 |
|------|------|
| 削除方法 | 各サムネイルの「×」ボタンクリック |
| 確認 | なし（即座に削除） |
| 削除後 | インデックスを振り直し |
| 全削除 | 「全削除」ボタンで一括削除（確認あり） |

#### 2.2.4 スプライト並び替え（推奨機能）
| 項目 | 仕様 |
|------|------|
| 方法 | ドラッグ&ドロップ |
| 視覚効果 | ドラッグ中は半透明表示 |
| ドロップ位置 | ドロップ位置に挿入 |
| 代替方法 | 「↑」「↓」ボタンで移動（優先度低） |

#### 2.2.5 スプライト選択（推奨機能）
| 項目 | 仕様 |
|------|------|
| 選択方法 | サムネイルクリック |
| 視覚効果 | 選択中は青枠表示（3px、#007bff） |
| 複数選択 | 非対応（単一選択のみ） |
| 用途 | 削除、情報表示用 |

### 2.3 レイアウト設定機能

#### 2.3.1 グリッド設定
| 項目 | 設定範囲 | デフォルト値 | 単位 |
|------|---------|-------------|------|
| 横列数 | 1-16 | 8 | 列 |
| パディング | 0-4 | 0 | px |
| マージン | 0-4 | 0 | px |
| 縦列数 | 自動計算 | - | 行 |

#### 2.3.2 自動計算ロジック
\`\`\`javascript
// 縦列数の計算
const rows = Math.ceil(spriteCount / columns);

// シート幅の計算
const sheetWidth = columns * 12 + (columns - 1) * padding + margin * 2;

// シート高さの計算
const sheetHeight = rows * 12 + (rows - 1) * padding + margin * 2;
\`\`\`

#### 2.3.3 設定UI仕様
| 項目 | UI要素 |
|------|--------|
| 横列数 | ドロップダウン（1-16） |
| パディング | ドロップダウン（0-4px） |
| マージン | ドロップダウン（0-4px） |
| プリセット | 「8列・パディング0」「4列・パディング1」等 |

#### 2.3.4 リアルタイム反映
- 設定変更時に即座にプレビュー更新
- 最終サイズ表示（例: 96×48px）
- スプライト配置座標を再計算

### 2.4 プレビュー機能

#### 2.4.1 プレビュー表示仕様
| 項目 | 仕様 |
|------|------|
| 表示方法 | Canvas要素で描画 |
| 背景 | チェッカーボード（透過確認用） |
| 更新タイミング | スプライト追加/削除/並び替え/設定変更時 |
| アンチエイリアス | 無効（ピクセルパーフェクト） |

#### 2.4.2 チェッカーボード仕様
| 項目 | 仕様 |
|------|------|
| 明色 | #ffffff |
| 暗色 | #e0e0e0 |
| セルサイズ | 4×4px または 6×6px |
| パターン | 市松模様 |

#### 2.4.3 ズーム機能（推奨）
| 項目 | 仕様 |
|------|------|
| ズームレベル | 100%, 200%, 400% |
| 切替方法 | ボタンまたはドロップダウン |
| デフォルト | 100%（実寸） |
| 大型シート時 | 自動で縮小表示（最大幅800px） |

#### 2.4.4 情報表示
| 表示項目 | 表示内容 |
|---------|---------|
| スプライト数 | 「スプライト数: X個」 |
| シートサイズ | 「サイズ: W×Hpx」 |
| ファイルサイズ予測 | 「推定サイズ: 約XKB」（推奨） |
| グリッド構成 | 「グリッド: X列×Y行」 |

### 2.5 出力機能

#### 2.5.1 PNG出力仕様
| 項目 | 仕様 |
|------|------|
| 形式 | PNG 32bit（RGBA） |
| 圧縮 | デフォルト（ブラウザ標準） |
| 透過 | アルファチャンネル対応 |
| 色深度 | 8bit/channel |
| サイズ | グリッド設定に基づき自動計算 |

#### 2.5.2 ファイル名規則
\`\`\`javascript
// 命名規則
spritesheet_[列数]x[行数]_[タイムスタンプ].png

// 例
spritesheet_8x4_20251101_143025.png
spritesheet_16x2_20251101_143026.png

// タイムスタンプ形式
YYYYMMDD_HHMMSS
\`\`\`

#### 2.5.3 出力ボタン仕様
| 項目 | 仕様 |
|------|------|
| ボタンラベル | 「PNG出力」または「ダウンロード」 |
| 活性条件 | スプライトが1個以上存在 |
| 非活性時 | グレーアウト、ツールチップで理由表示 |
| クリック時 | 即座にダウンロード開始 |
| 完了メッセージ | 「ダウンロードしました」（2秒表示） |

---

## 3. UI/UX要件

### 3.1 画面レイアウト

\`\`\`
┌───────────────────────────────────────┐
│   スプライトシートジェネレーター       │
├───────────────────────────────────────┤
│  入力エリア                            │
│  ┌─────────────────────────────────┐  │
│  │ [[0,1,1,0,...],[...],...]       │  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│  [追加]  エラー: 不正な形式です       │
├───────────────────────────────────────┤
│  スプライト一覧                        │
│  ┌──┐┌──┐┌──┐┌──┐                   │
│  │#0││#1││#2││#3│ [×削除]           │
│  └──┘└──┘└──┘└──┘                   │
├───────────────────────────────────────┤
│  レイアウト設定                        │
│  横列数: [8▼] パディング: [0▼]px     │
├───────────────────────────────────────┤
│  プレビュー (96×48px)                 │
│  ┌─────────────────────────────────┐  │
│  │ [スプライトシート表示]           │  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│  [PNG出力]                            │
└───────────────────────────────────────┘
\`\`\`

### 3.2 操作方法

#### 3.2.1 マウス操作
| 操作 | 動作 |
|------|------|
| クリック | スプライト選択、ボタン実行 |
| ドラッグ&ドロップ | スプライト並び替え（推奨機能） |
| ホバー | ツールチップ表示、ハイライト |

#### 3.2.2 キーボードショートカット
| キー | 動作 |
|------|------|
| \`Ctrl + V\` | 入力エリアにペースト（標準動作） |
| \`Enter\`（入力エリア） | 追加実行（推奨） |
| \`Delete\` | 選択中のスプライト削除 |
| \`Ctrl + S\` | PNG出力 |

### 3.3 レスポンシブ対応

#### 3.3.1 対応画面サイズ
| デバイス | 対応状況 | 最小幅 |
|---------|---------|--------|
| デスクトップ | 完全対応 | 1024px |
| タブレット | 部分対応 | 768px |
| モバイル | 限定対応 | 480px |

#### 3.3.2 タブレット時の調整
- スプライトサムネイルを大きく（60×60px）
- 横列数デフォルトを4列に変更
- プレビューを幅100%に調整

#### 3.3.3 モバイル時の調整
- 1カラムレイアウト
- スプライトサムネイル: 48×48px
- 横列数デフォルトを2列に変更
- プレビューを最小化

### 3.4 視覚フィードバック

#### 3.4.1 ホバー効果
| 要素 | 効果 |
|------|------|
| スプライトサムネイル | 半透明オーバーレイ表示 |
| 削除ボタン | 赤背景強調 |
| 追加ボタン | 背景色変化 |
| ドロップダウン | 背景色変化 |

#### 3.4.2 ドラッグ中の視覚効果
| 状態 | 視覚表現 |
|------|---------|
| ドラッグ開始 | カーソルがgrab→grabbingに変化 |
| ドラッグ中 | 要素が半透明（opacity: 0.5） |
| ドロップ可能位置 | 点線枠表示 |
| ドロップ不可 | カーソルがnot-allowedに変化 |

#### 3.4.3 状態メッセージ
| 動作 | メッセージ | 表示色 | 表示時間 |
|------|----------|--------|---------|
| スプライト追加成功 | 「スプライトを追加しました」 | 緑 | 2秒 |
| スプライト削除 | 「スプライトを削除しました」 | 灰色 | 2秒 |
| PNG出力成功 | 「ダウンロードしました」 | 青 | 2秒 |
| エラー | エラー内容 | 赤 | 消去まで |
| 上限到達 | 「最大256個までです」 | オレンジ | 3秒 |

---

## 4. 非機能要件

### 4.1 パフォーマンス要件

| 項目 | 要件 |
|------|------|
| 初回ロード時間 | 2秒以内 |
| スプライト追加 | 200ms以内 |
| スプライト削除 | 100ms以内 |
| プレビュー更新 | 300ms以内（100スプライト時） |
| PNG生成 | 2秒以内（256スプライト時） |
| メモリ使用量 | 100MB以内 |

### 4.2 スケーラビリティ

| 項目 | 要件 |
|------|------|
| 最大スプライト数 | 256個 |
| 最大シートサイズ | 2048×2048px |
| 最大ファイルサイズ | 5MB以内 |

### 4.3 互換性要件

#### 4.3.1 ブラウザ対応
| ブラウザ | 最小バージョン | 対応状況 |
|---------|--------------|---------|
| Google Chrome | 90以降 | 完全対応 |
| Mozilla Firefox | 88以降 | 完全対応 |
| Safari | 14以降 | 完全対応 |
| Microsoft Edge | 90以降 | 完全対応 |
| Internet Explorer | - | 非対応 |

#### 4.3.2 必須Web API
- Canvas API
- Blob API
- URL.createObjectURL()
- JSON API
- Drag and Drop API（並び替え機能用）

#### 4.3.3 ゲームエンジン互換性
| エンジン | 対応状況 | 備考 |
|---------|---------|------|
| Unity | 完全対応 | Sprite Mode: Multiple |
| Godot | 完全対応 | AtlasTexture使用 |
| Phaser.js | 完全対応 | spritesheet loader対応 |
| GameMaker | 完全対応 | 手動スライス |
| RPG Maker | 部分対応 | 手動配置必要 |

### 4.4 可用性要件

| 項目 | 要件 |
|------|------|
| 稼働率 | N/A（静的サイト） |
| エラー復帰 | エラー時も操作継続可能 |

### 4.5 セキュリティ要件

| 項目 | 対応 |
|------|------|
| XSS対策 | ユーザー入力のサニタイズ |
| データ保存 | ローカルのみ（サーバー送信なし） |
| ファイルダウンロード | Blob URLを使用、自動revoke |
| HTTPS | 推奨（必須ではない） |

### 4.6 保守性要件

| 項目 | 要件 |
|------|------|
| コード品質 | ESLint準拠 |
| コメント | 主要関数に説明必須 |
| 関数サイズ | 1関数50行以内推奨 |
| モジュール分割 | 機能ごとにファイル分割推奨 |

---

## 5. 技術仕様

### 5.1 使用技術

| 分類 | 技術 | バージョン |
|------|------|----------|
| HTML | HTML5 | - |
| CSS | CSS3 | - |
| JavaScript | ES6+ | - |
| フレームワーク | なし（Vanilla JS）または軽量ライブラリ | - |
| ビルドツール | 不要（任意） | - |

### 5.2 パレット定義

\`\`\`javascript
// ドット絵エディターと共通のパレット定義
const PALETTE = {
  0: 'transparent',
  1: '#000000',
  2: '#222034',
  3: '#45283c',
  4: '#663931',
  5: '#8f563b',
  6: '#df7126',
  7: '#d9a066',
  8: '#eec39a',
  9: '#fbf236',
  10: '#99e550',
  11: '#6abe30',
  12: '#37946e',
  13: '#4b692f',
  14: '#524b24',
  15: '#323c39',
  16: '#3f3f74',
  17: '#306082',
  18: '#5b6ee1',
  19: '#639bff',
  20: '#5fcde4',
  21: '#cbdbfc',
  22: '#ffffff',
  23: '#9badb7',
  24: '#847e87',
  25: '#696a6a',
  26: '#595652',
  27: '#76428a',
  28: '#ac3232',
  29: '#d95763',
  30: '#d77bba',
  31: '#8f974a',
  32: '#8a6f30'
};
\`\`\`

### 5.3 データ構造

#### 5.3.1 スプライトデータ構造
\`\`\`javascript
// スプライトオブジェクト
const sprite = {
  id: 'sprite_1635782400000',  // ユニークID（タイムスタンプ）
  index: 0,                     // 配列内のインデックス
  data: [                       // 12×12の二次元配列
    [0, 1, 1, 0, ...],
    [1, 23, 23, 1, ...],
    // ... 12行
  ],
  canvas: canvasElement         // プレビュー用Canvas（任意）
};

// スプライトリスト
let sprites = [];
\`\`\`

#### 5.3.2 レイアウト設定構造
\`\`\`javascript
const layout = {
  columns: 8,       // 横列数
  padding: 0,       // スプライト間の間隔（px）
  margin: 0,        // 外周の余白（px）
  spriteSize: 12    // 各スプライトのサイズ（固定）
};
\`\`\`

### 5.4 主要アルゴリズム

#### 5.4.1 配列→Canvas変換
\`\`\`javascript
function arrayToCanvas(arr) {
  const canvas = document.createElement('canvas');
  canvas.width = 12;
  canvas.height = 12;
  const ctx = canvas.getContext('2d', { alpha: true });
  ctx.imageSmoothingEnabled = false;
  
  const imageData = ctx.createImageData(12, 12);
  
  for (let y = 0; y < 12; y++) {
    for (let x = 0; x < 12; x++) {
      const colorIndex = arr[y][x];
      const i = (y * 12 + x) * 4;
      
      if (colorIndex === 0) {
        // 透明
        imageData.data[i] = 0;
        imageData.data[i + 1] = 0;
        imageData.data[i + 2] = 0;
        imageData.data[i + 3] = 0;
      } else {
        // RGB
        const hex = PALETTE[colorIndex];
        const rgb = hexToRgb(hex);
        imageData.data[i] = rgb.r;
        imageData.data[i + 1] = rgb.g;
        imageData.data[i + 2] = rgb.b;
        imageData.data[i + 3] = 255;
      }
    }
  }
  
  ctx.putImageData(imageData, 0, 0);
  return canvas;
}

function hexToRgb(hex) {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  };
}
\`\`\`

#### 5.4.2 スプライトシート生成
\`\`\`javascript
function generateSpriteSheet(sprites, layout) {
  const { columns, padding, margin, spriteSize } = layout;
  const rows = Math.ceil(sprites.length / columns);
  
  // シートサイズ計算
  const sheetWidth = columns * spriteSize + (columns - 1) * padding + margin * 2;
  const sheetHeight = rows * spriteSize + (rows - 1) * padding + margin * 2;
  
  // Canvas作成
  const canvas = document.createElement('canvas');
  canvas.width = sheetWidth;
  canvas.height = sheetHeight;
  const ctx = canvas.getContext('2d', { alpha: true });
  ctx.imageSmoothingEnabled = false;
  
  // 透明背景
  ctx.clearRect(0, 0, sheetWidth, sheetHeight);
  
  // 各スプライトを配置
  sprites.forEach((sprite, index) => {
    const col = index % columns;
    const row = Math.floor(index / columns);
    const x = margin + col * (spriteSize + padding);
    const y = margin + row * (spriteSize + padding);
    
    // スプライトのCanvasを描画
    const spriteCanvas = arrayToCanvas(sprite.data);
    ctx.drawImage(spriteCanvas, x, y);
  });
  
  return canvas;
}
\`\`\`

#### 5.4.3 PNG出力
\`\`\`javascript
function exportPNG(canvas) {
  const timestamp = new Date().toISOString()
    .replace(/[-:]/g, '')
    .replace('T', '_')
    .slice(0, 15);
  
  const cols = layout.columns;
  const rows = Math.ceil(sprites.length / cols);
  const filename = \`spritesheet_\${cols}x\${rows}_\${timestamp}.png\`;
  
  canvas.toBlob((blob) => {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    
    // メモリ解放
    setTimeout(() => URL.revokeObjectURL(url), 100);
  }, 'image/png');
}
\`\`\`

### 5.5 バリデーション実装

\`\`\`javascript
function validateSpriteData(input) {
  try {
    // JSON解析
    const data = JSON.parse(input);
    
    // 配列チェック
    if (!Array.isArray(data)) {
      return { valid: false, error: '配列形式ではありません' };
    }
    
    // 行数チェック
    if (data.length !== 12) {
      return { valid: false, error: \`行数が12ではありません（現在: \${data.length}行）\` };
    }
    
    // 各行のチェック
    for (let y = 0; y < 12; y++) {
      const row = data[y];
      
      // 行が配列か
      if (!Array.isArray(row)) {
        return { valid: false, error: \`\${y}行目が配列ではありません\` };
      }
      
      // 列数チェック
      if (row.length !== 12) {
        return { valid: false, error: \`\${y}行目の列数が12ではありません（現在: \${row.length}列）\` };
      }
      
      // 各要素のチェック
      for (let x = 0; x < 12; x++) {
        const value = row[x];
        
        // 数値型チェック
        if (typeof value !== 'number') {
          return { valid: false, error: \`\${y}行\${x}列が数値ではありません（値: \${value}）\` };
        }
        
        // 整数チェック
        if (!Number.isInteger(value)) {
          return { valid: false, error: \`\${y}行\${x}列が整数ではありません（値: \${value}）\` };
        }
        
        // 範囲チェック
        if (value < 0 || value > 32) {
          return { valid: false, error: \`\${y}行\${x}列の値が範囲外です（値: \${value}、範囲: 0-32）\` };
        }
      }
    }
    
    return { valid: true, data: data };
    
  } catch (e) {
    return { valid: false, error: '配列の形式が正しくありません' };
  }
}
\`\`\`

---

## 6. テスト要件

### 6.1 単体テスト項目

| テスト項目 | 確認内容 |
|-----------|---------|
| バリデーション | 正しい配列が通過するか |
| バリデーション（エラー） | 不正な配列を拒否するか |
| スプライト追加 | 正しく一覧に追加されるか |
| スプライト削除 | 正しく削除されるか |
| 配列→Canvas変換 | 正しく描画されるか |
| 座標計算 | 各スプライトの位置が正しいか |
| PNG生成 | 正しいサイズのPNGが生成されるか |

### 6.2 統合テスト項目

| テスト項目 | 確認内容 |
|-----------|---------|
| 入力→追加→プレビュー | 一連の流れが動作するか |
| 設定変更→プレビュー更新 | レイアウト変更が反映されるか |
| 256個追加 | 最大数まで正しく動作するか |
| PNG出力→確認 | 出力画像が正しいか |

### 6.3 ゲームエンジンテスト

| エンジン | テスト内容 |
|---------|----------|
| Unity | PNG読込、スライス、表示確認 |
| Godot | AtlasTexture設定、表示確認 |
| Phaser.js | spritesheet読込、アニメーション確認 |

### 6.4 ブラウザテスト

| ブラウザ | テスト内容 |
|---------|----------|
| Chrome | 全機能動作確認 |
| Firefox | 全機能動作確認 |
| Safari | 全機能動作確認、PNG透過確認 |
| Edge | 全機能動作確認 |

---

## 7. 制約事項

### 7.1 技術的制約
- スプライトサイズは12×12固定
- パレットはDB32固定（入力データの数値が0-32）
- 最大スプライト数256個
- Canvas最大サイズ: 2048×2048px
- ブラウザのメモリ制限内で動作

### 7.2 機能的制約
- スプライトの個別編集機能なし
- アニメーションプレビュー機能なし
- オンライン共有機能なし
- 複数プロジェクトの同時管理なし
- JSONメタデータ出力なし
- セッション保存機能なし

### 7.3 データ制約
- 入力データはドット絵エディターの出力形式のみ対応
- 画像ファイルからのインポート非対応
- 異なるサイズのスプライト混在不可

---

## 8. 納品物

### 8.1 必須ファイル
- \`index.html\` - メインHTML
- \`style.css\` - スタイルシート
- \`script.js\` - JavaScript実装
- \`README.md\` - 使用方法説明

### 8.2 推奨ファイル
- \`palette.js\` - パレット定義（ドット絵エディターと共通）
- \`validator.js\` - バリデーション処理
- \`generator.js\` - PNG生成処理

### 8.3 サンプルデータ
- \`sample_sprite_1.txt\` - サンプル配列データ
- \`sample_sprite_2.txt\` - サンプル配列データ
- \`sample_spritesheet.png\` - 出力例

---

## 9. 今後の拡張可能性

### 9.1 優先度高
- [ ] 異なるサイズのスプライト対応（16×16、32×32）
- [ ] ドラッグ&ドロップによる配列ファイル読込
- [ ] JSONメタデータ出力機能

### 9.2 優先度中
- [ ] セッション保存・復元機能
- [ ] アニメーションプレビュー機能
- [ ] スプライトの個別編集機能
- [ ] カスタム背景色設定

### 9.3 優先度低
- [ ] GIFアニメーション出力
- [ ] オンライン共有機能
- [ ] プロジェクトのクラウド保存
- [ ] 他形式（WebP、AVIF）への出力

---

## 10. 参考資料

- Canvas API: https://developer.mozilla.org/ja/docs/Web/API/Canvas_API
- Blob API: https://developer.mozilla.org/ja/docs/Web/API/Blob
- Unity Sprite Documentation: https://docs.unity3d.com/Manual/Sprites.html
- Godot AtlasTexture: https://docs.godotengine.org/en/stable/classes/class_atlastexture.html
- Phaser Spritesheet: https://photonstorm.github.io/phaser3-docs/Phaser.Loader.LoaderPlugin.html#spritesheet
- TexturePacker (参考ツール): https://www.codeandweb.com/texturepacker
